<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta charset="utf-8"/><title>ross.fyi</title><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="ross.fyi"/><link rel="icon" href="data:image/svg+xml,&lt;svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22&gt;&lt;text y=%22.9em%22 font-size=%2290%22&gt;ðŸ—¿&lt;/text&gt;&lt;/svg&gt;"/><meta name="next-head-count" content="6"/><link rel="preload" href="/_next/static/css/a20199747d38999e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/a20199747d38999e.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-7751730b10fa0f74.js" defer=""></script><script src="/_next/static/chunks/main-591bb7ec51acdc0d.js" defer=""></script><script src="/_next/static/chunks/pages/_app-ff3116af9ab5badd.js" defer=""></script><script src="/_next/static/chunks/pages/index-25a0b01bf4a20c84.js" defer=""></script><script src="/_next/static/ZUP_p62WYD1ZG_WAm3Vwo/_buildManifest.js" defer=""></script><script src="/_next/static/ZUP_p62WYD1ZG_WAm3Vwo/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="Home_container__bCOhY"><header class="Home_header__GCVRv"><h1 class="Home_title__T09hD"><a href="/">ross.fyi</a></h1></header><main class="Home_main__nLjiQ"><article><ul class="Home_articleList__RW0kf"><li class="Home_articleLink__ZeaAL"><a href="/posts/ripping-games">Ripping Games</a><time>2023-01-27</time><span class="Home_articleLinkSubtitle__zSEjK">How to rip, format, and archive game discs for emulation and preservation.</span></li><li class="Home_articleLink__ZeaAL"><a href="/posts/rom-patching">Rom Patching</a><time>2022-12-14</time><span class="Home_articleLinkSubtitle__zSEjK">Utilities for applying hacks, translations, and other patches to ROMs in Linux</span></li></ul></article></main></div><footer class="Home_footer____T7K">Copyright Â© <!-- -->2023<!-- --> ross.fyi</footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"allPostsData":[{"id":"ripping-games","contentHtml":"\u003ch2\u003eSega Saturn\u003c/h2\u003e\n\u003ch3\u003eConverting from MDF/MDS\u003c/h3\u003e\n\u003cp\u003eSome of my Sega Saturn discs are ripped as MDF (Media Descriptor File) and MDS (Media Descriptor Sidecar) filetypes. These are common as rips from Alcohol 120%, a classic Windows program used for ripping and burning discs. Some modern emulators do not handle these filetyles so it can be worthwhile to convert to other formats for compatibility. I've been targeting \u003ca href=\"https://docs.libretro.com/library/beetle_saturn/\"\u003eBeetle Saturn\u003c/a\u003e which is still maintained but does not support MDF/MDS.\u003c/p\u003e\n\u003ch4\u003eConverting to ISO\u003c/h4\u003e\n\u003cp\u003eFirst install \u003ca href=\"https://github.com/ropery/iat\"\u003eiat\u003c/a\u003e, a free utility tool that can convert disc formats to ISO.\u003c/p\u003e\n\u003cp\u003eIn Ubuntu:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003esudo apt-get install iat\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eConverting your MDF/MDS filepair is as simple as running the tool against the MDF file:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eiat INPUT_FILE.mdf OUTPUTFILE.iso\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eOnce it has completed you will have an ISO formatted disc file per your output argument. After this I would recommend converting to \u003ca href=\"#converting-to-chd\"\u003eCHD\u003c/a\u003e.\u003c/p\u003e\n\u003ch2\u003eSony PlayStation\u003c/h2\u003e\n\u003cp\u003ePlayStation emulators typically require the PlayStation disc image to be in a bin/cue format. The \u003ccode\u003e.bin\u003c/code\u003e file contains the binary content of the disc and the \u003ccode\u003e.cue\u003c/code\u003e contains directions for loading the data for the hardware reading the disc. In our case the hardware is virtualized within the emulator.\u003c/p\u003e\n\u003ch3\u003ePrerequisites\u003c/h3\u003e\n\u003cp\u003eThere's only a few tools we need for ripping a PSX disc: a CD drive to read the disc and a CLI called \u003ccode\u003ecdrdao\u003c/code\u003e.\u003c/p\u003e\n\u003ch4\u003eCD drive\u003c/h4\u003e\n\u003cp\u003eThe disc contents will be read through a physical CD drive. I've tested these instructions using an \u003ca href=\"https://a.co/d/3YAR4WD\"\u003eLG Ultra-Slim Portable DVD Burner\u003c/a\u003e, but most general purpose CD drives should work.\u003c/p\u003e\n\u003ch4\u003eSoftware\u003c/h4\u003e\n\u003cp\u003eWe'll be using \u003ca href=\"https://cdrdao.sourceforge.net/\"\u003ecdrdao\u003c/a\u003e for ripping the discs, a CLI for reading and writing discs in a \"disk-at-once\" mode. You can install \u003ccode\u003ecdrdao\u003c/code\u003e with your favorite package manager. For reference, I have installed the program on both macOS and Ubuntu.\u003c/p\u003e\n\u003ch5\u003emacOS\u003c/h5\u003e\n\u003cp\u003e\u003ccode\u003ebrew install cdrdao\u003c/code\u003e\u003c/p\u003e\n\u003ch5\u003eUbuntu\u003c/h5\u003e\n\u003cp\u003e\u003ccode\u003esudo apt install cdrdao\u003c/code\u003e\u003c/p\u003e\n\u003ch3\u003eRipping a disc to bin \u0026#x26; cue files\u003c/h3\u003e\n\u003cp\u003eFirst you will need to insert your PSX disc into your CD drive. Once it has spun up and mounted the disc to your filesystem we will begin by unmounting it. This is slightly different based on your operating system.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# Linux (Ubuntu)\n$ df\n$ sudo umount **DISK_LOCATION**\n\n# macOS\n$ diskutil list\n$ diskutil unmountDisk **DISK_LOCATION**\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003e**DISK_LOCATION**\u003c/code\u003e parameter should be replaced with the location of your disk drive per the results of the list command. On my installation of Ubuntu the CD was mounted to \u003ccode\u003e/dev/sr0\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eNow we can begin reading and dumping the contents of the disc to a file:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ecdrdao read-cd --read-raw --datafile GAMENAME.bin --driver generic-mmc GAMENAME.toc\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe \u003ccode\u003eGAMENAME\u003c/code\u003e value can be whatever value you decide, so preferably the name of the game you are ripping.\u003c/p\u003e\n\u003cp\u003eYou'll begin to see some results in the console as the disc is ripped. The length of the process depends on the read speed of your disk drive, but for reference this only took a few minutes with my USB DVD drive.\u003c/p\u003e\n\u003cp\u003eIf all goes well you will see two files in the directory where you ran the command: \u003ccode\u003eGAMENAME.bin\u003c/code\u003e and \u003ccode\u003eGAMENAME.toc\u003c/code\u003e. The \u003ccode\u003e.toc\u003c/code\u003e file is very similar to the \u003ccode\u003e.cue\u003c/code\u003e file we need as it describes the contents of the disc. \u003ccode\u003ecdrdao\u003c/code\u003e installs with a useful tool for this conversion called \u003ccode\u003etoc2cue\u003c/code\u003e. Running the following command will generate the \u003ccode\u003e.cue\u003c/code\u003e file needed:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003etoc2cue GAMENAME.toc GAMENAME.cue\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eNow you should be able to load the game in your PSX emulator of choice by loading its \u003ccode\u003e.cue\u003c/code\u003e file.\u003c/p\u003e\n\u003ch3\u003eTroubleshooting\u003c/h3\u003e\n\u003ch4\u003eL-EC errors\u003c/h4\u003e\n\u003cp\u003eIf your disc is damaged, or even just has smudges on it, the ripping process may appear to go very slowly and not finish correctly. If you are seeing errors such as \u003ccode\u003eWARNING: Found L-EC error at sector 814 - ignored\u003c/code\u003e you may need to wipe your disc clean or try to repair any damages to it.\u003c/p\u003e\n\u003ch2\u003eSony PlayStation 2\u003c/h2\u003e\n\u003cp\u003eRipping PS2 DVDs is often a much simpler process depending on the game. After inserting your PS2 disc into your disc drive a good first place to start is to use the built in \u003ccode\u003edd\u003c/code\u003e utility on macOS and Linux:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e# List mounted drives\ndf\n\ndd if=/dev/*DISK_LOCATION* of=~/cdrom_image.bin status=progress\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003ewhere \u003ccode\u003e*DISK_LOCATION*\u003c/code\u003e is the location of the PS2 disc found after running \u003ccode\u003edf\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003eThis will produce a \u003ccode\u003e.bin\u003c/code\u003e file with the binary data of the disc. You will need a simple \u003ccode\u003e.cue\u003c/code\u003e file which could be generated by hand or using a utility. Duckstation provides a handy web tool for this: https://www.duckstation.org/cue-maker/\u003c/p\u003e\n\u003cp\u003eWhile \u003ccode\u003e.bin/.cue\u003c/code\u003e is preferable, an \u003ccode\u003e.iso\u003c/code\u003e file will also work with most emulators and does not require a \u003ccode\u003e.cue\u003c/code\u003e. The second command stays the same except \u003ccode\u003e.bin\u003c/code\u003e is replaced with \u003ccode\u003e.iso\u003c/code\u003e:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003edd if=/dev/*DISK_LOCATION* of=~/cdrom_image.iso status=progress\u003c/code\u003e\u003c/p\u003e\n\u003ch1\u003eConverting to CHD\u003c/h1\u003e\n\u003cp\u003eI highly recommend converting any disc data to the \u003ccode\u003e.chd\u003c/code\u003e format to simplify your backups and save space with compression:\u003c/p\u003e\n\u003cp\u003ehttps://retropie.org.uk/docs/CHD-files/\u003c/p\u003e\n\u003cblockquote\u003e\n\u003cp\u003eCHD is a lossless compression format originally developed for MAME, for the hard-drive contents of certain arcade machines. It has since been used in several other emulators as a means of storing CD-ROM game data. For CD-based games, it compresses the contents of a disc image (.cue + .bin files) to a single .chd file.\u003c/p\u003e\n\u003c/blockquote\u003e\n\u003cp\u003e\u003ccode\u003e.chd\u003c/code\u003e has great compatibility across the most popular emulators, I've been using it specifically with:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eredream (Dreamcast)\u003c/li\u003e\n\u003cli\u003eflycast (Dreamcast)\u003c/li\u003e\n\u003cli\u003eDuckstation (PS1)\u003c/li\u003e\n\u003cli\u003eYaba Sanshiro 2 (Sega Saturn)\u003c/li\u003e\n\u003cli\u003eBeetle Saturn (Sega Saturn)\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2\u003eSetup\u003c/h2\u003e\n\u003cp\u003eFollow the guide posted above for installing \u003ccode\u003erom-tools\u003c/code\u003e (macOS) or \u003ccode\u003emame-tools\u003c/code\u003e (Linux). After installing a \u003ccode\u003echdman\u003c/code\u003e command should be available:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e$ chdman info\nchdman - MAME Compressed Hunks of Data (CHD) manager 0.242 (unknown)\nError: Required parameters missing\n\nUsage:\n   chdman info [options], where valid options are:\n      --input, -i \u0026#x3C;filename\u003e: input file name (required)\n      --verbose, -v: output additional information\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003echdman\u003c/code\u003e works with many filetypes but I've been using it specifically for PSX, Saturn, and Dreamcast backups. This includes \u003ccode\u003e.bin/.cue\u003c/code\u003e and \u003ccode\u003e.gdi\u003c/code\u003e formats.\u003c/p\u003e\n\u003ch2\u003e.bin/.cue\u003c/h2\u003e\n\u003cp\u003eCUE files are plaintext files that define how the \"tracks\" of the disc are laid out. Opening a CUE file will show that its contents are simple: references to the other files in the disc and their index. The CHD docs provides examples on how to use the tool but I'll be reproducing those here. Pointing \u003ccode\u003echdman\u003c/code\u003e at a \u003ccode\u003e.cue\u003c/code\u003e file will use this info to create the single \u003ccode\u003e.chd\u003c/code\u003e file:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003echdman createcd -i \u0026#x3C;game.cue\u003e -o \u0026#x3C;game.chd\u003e\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAlternatively you can convert many files in a single command like:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003efor i in *.cue; do chdman createcd -i \"$i\" -o \"${i%.*}.chd\"; done\u003c/code\u003e\u003c/p\u003e\n\u003ch2\u003e.gdi\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003echdman\u003c/code\u003e works exactly the same with Dreamcast \u003ccode\u003e.gdi\u003c/code\u003e images, where instead of pointing at the \u003ccode\u003e.cue\u003c/code\u003e you reference the \u003ccode\u003e.gdi\u003c/code\u003e file:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003echdman createcd -i \u0026#x3C;game.gdi\u003e -o \u0026#x3C;game.chd\u003e\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eAlternatively you can convert many files in a single command like:\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003efor i in *.gdi; do chdman createcd -i \"$i\" -o \"${i%.*}.chd\"; done\u003c/code\u003e\u003c/p\u003e\n","title":"Ripping Games","subtitle":"How to rip, format, and archive game discs for emulation and preservation.","date":"2023-01-27"},{"id":"rom-patching","contentHtml":"\u003cp\u003eA lot of the information and utilities on the web for applying patches to ROMs is out of date. If you're trying to apply a translation, hack, or modification as UPS files to a GameBoy Advance ROM you can follow this guide.\u003c/p\u003e\n\u003ch1\u003eTools\u003c/h1\u003e\n\u003cp\u003eIf you're like me you probably stumbled onto the directions for patching while trying to build a \u003ca href=\"http://mother3.fobby.net/or/\"\u003eMother 3 fan translated ROM\u003c/a\u003e. These directions are out of date and the \u003ccode\u003emother3_linux\u003c/code\u003e utility does not work in Ubuntu 22.04. You'll also see a suggestion to use \u003ca href=\"https://www.romhacking.net/utilities/519/\"\u003e\u003cem\u003ebyuu's tsukuyomi UPS utility\u003c/em\u003e\u003c/a\u003e, but I was not able to get this to work either.\u003c/p\u003e\n\u003cp\u003eInstead, we're going to use \u003ca href=\"https://www.romhacking.net/utilities/677/\"\u003e\u003cem\u003eupset\u003c/em\u003e\u003c/a\u003e which presents itself as a replacement for \u003cem\u003eTsukuyomi\u003c/em\u003e. Download the tool from ROMHacking and unzip its contents. The tool works by applying the UPS patch \"which are binary diffs between two files\". The source code is provided in the zip file if you are curious how this is working under the hood, or if you'd like to build it yourself.\u003c/p\u003e\n\u003ch1\u003eUsing \u003cem\u003eupset\u003c/em\u003e to patch ROMs\u003c/h1\u003e\n\u003col\u003e\n\u003cli\u003eOpen your terminal and navigate to the directory with the contents of the \u003ccode\u003eupset.zip\u003c/code\u003e file.\u003c/li\u003e\n\u003cli\u003eRun \u003ccode\u003e./upset\u003c/code\u003e to bring up the \u003cem\u003eupset\u003c/em\u003e GUI.\u003c/li\u003e\n\u003cli\u003eSet the \u003cem\u003eSource file\u003c/em\u003e to the UPS patch you are going to apply.\u003c/li\u003e\n\u003cli\u003eSet \u003cem\u003eTarget file\u003c/em\u003e to the ROM file you are patching.\u003c/li\u003e\n\u003cli\u003ePress \u003cem\u003eOk\u003c/em\u003e\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eIf all goes well your ROM file should now have the UPS patch applied.\u003c/p\u003e\n","title":"Rom Patching","subtitle":"Utilities for applying hacks, translations, and other patches to ROMs in Linux","date":"2022-12-14"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"ZUP_p62WYD1ZG_WAm3Vwo","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>